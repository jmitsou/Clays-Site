(function(k){k.fn.accordionGallery=function(f){function aa(){var a=ba.width(),b=ba.height(),c=g.width(),d=g.height();a<=c?g.css({left:"0px",marginLeft:"0px"}):g.css({left:"50%",marginLeft:-g.width()/2+"px"});f.dontAlignHeight||(b<=d?g.css({top:"0px",marginTop:"0px"}):g.css({top:"50%",marginTop:-g.height()/2+"px"}))}function ca(a){"horizontal"==w?(u.css("width",n+"px"),-1!=b&&(a&&h.reinitialise(),da&&l&&(a=Math.floor((v-1)/2),a=Math.abs((b-a)*l),b<Math.ceil(v/2)&&(a=0),h.scrollToX(a,!0)))):(u.css("height", n+"px"),-1!=b&&(a&&h.reinitialise(),da&&l&&(a=Math.floor((v-1)/2),a=Math.abs((b-a)*l),b<Math.ceil(v/2)&&(a=0),h.scrollToY(a,!0))))}function la(a,b,c,d){if(p&&h)return h&&h.scrollByX(20*(0<b?-1:1)),!1}function ea(a){fa(a)}function fa(a){if(p){G=!0;e&&H();a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.currentTarget;var ka=k(a).attr("data-id");if(!a.opened)return A(b),b=ka,x(b),!1}}function ma(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble= !0:a.stopPropagation&&a.stopPropagation(),a=k(a.currentTarget).attr("data-id"),e?I():na||(A(a),ga("tween"),J&&clearTimeout(J),J=setTimeout(oa,B)),G=!1}function A(a){-1!=a&&(beforeSlideChange(a),K&&clearTimeout(K),void 0!=t[a].data("slideContent")&&(a=t[a].data("slideContent"))&&a.stop().animate({opacity:0},{duration:500,easing:"easeOutSine"}))}function x(a){if(p){C=!0;r.stop();L.stop();r.animate({height:V+"px"},{duration:500,easing:"easeOutExpo"});L.animate({height:V+"px"},{duration:500,easing:"easeOutExpo"}); var b,c=t[a],d=0,m,f=0,g=0,e=0,h={};M&&(M.css("display","block"),M=null);c.data("preventDefaultOnOpen")&&(M=c.data("preventDefaultOnOpen"),M.css("display","none"));b=parseInt(c.data("itemSize"),10);l=(ha-b)/(v-1);n=parseInt(b+l*(D-1),10);for(d;d<q;d++)b=k(t[d]),b.attr("data-id"),d<a?(m=g*l,h[R]=m+"px",b.stop().animate(h,{duration:B,easing:S}),g++,b.attr("data-id")!=a?b[0].opened=!1:b[0].opened=!0):d==a?(e=a*l,h[R]=e+"px",b.stop().animate(h,{duration:B,easing:S}),b.attr("data-id")!=a?b[0].opened=!1: b[0].opened=!0):d>a&&(m=e+c.data("itemSize")+f*l,h[R]=m+"px",b.stop().animate(h,{duration:B,easing:S}),f++,b.attr("data-id")!=a?b[0].opened=!1:b[0].opened=!0);ca(!0);afterSlideChange(a);K&&clearTimeout(K);K=setTimeout(function(){pa(a)},B/3)}}function ga(a){var e,c=0,d,f={};n=parseInt(D*(ha/v),10);var g=n/D;for(c;c<q;c++)e=k(t[c]),d=c*g,f[R]=d+"px",e.stop().animate(f,{duration:a?B:0,easing:S}),e[0].opened=!1;b=-1}function oa(){J&&clearTimeout(J);"horizontal"==w?u.css("width",n+"px"):u.css("height", n+"px");h&&h.reinitialise()}function W(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=k(a.currentTarget).attr("class"),"controls_previous"==a?X():"controls_toggle"==a?Y():"controls_next"==a&&("forward"==E?N():Z()),!1}function Z(){A(b);b++;b>q-1&&(b=0);x(b)}function N(){A(b);"forward"==E?(b++,b>q-1&&(b=0)):(b--,0>b&&(b=q-1));x(b)}function X(){A(b);b--;0>b&&(b=q-1);x(b)}function ia(){var a;qa?a=0<O?O:3E3:(a=k(dataArr[b]),void 0==a.attr("data-delay")|| F(a.attr("data-width"))?(alert("You are missing 'data-delay' attribbute in slides, since you are not using global slideshow delay!"),a=0<O?O:3E3):a=a.attr("data-delay"));return a}function ja(){if(e&&!G){var a=ia();r.stop().animate({height:"0px"},{duration:a,easing:"linear"});L.stop().animate({height:"0px"},{duration:a,easing:"linear",complete:N})}}function H(){r.stop();L.stop();y.css("display","block");z.css("display","none")}function I(){y.css("display","none");z.css("display","block");var a=r.height(), b=ia(),a=a/V*b;0>a&&(a=0);r.stop().animate({height:"0px"},{duration:a,easing:"linear"});L.stop().animate({height:"0px"},{duration:a,easing:"linear",complete:N})}function Y(){e?(H(),e=!1):(e=!0,y.css("display","none"),z.css("display","block"),C||I())}function pa(a){void 0!=t[a].data("slideContent")?t[a].data("slideContent").stop().animate({opacity:1},{duration:500,easing:"easeOutSine",complete:function(){C=!1;ja()}}):(C=!1,ja())}function F(a){return 0==a.replace(/^\s+|\s+$/g,"").length}var p=!1;k("body"); var ba=k(window),ra=k(document),T=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);(function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a})();var g=k(this);jQuery(window).resize(function(){aa()});aa();var u=g.find(".componentPlaylist"),P=g.find(".componentScrollWrapper"),sa=g.find(".mediaPreloader"),ta=f.useControls,da=f.alignSlides,ua=f.sameSizeSlides,B=800,S="easeOutQuint", e=f.slideshowOn,O=f.slideshowDelay,t=[],C=!1,q,K,$=!1,va=f.useKeyboardNavigation,qa=f.useGlobalDelay,w=f.componentOrientation,wa="horizontal"==w?"horizontal":"vertical",b,E=f.slideshowDirection,Q=parseInt(u.css("width"),10),U=parseInt(u.css("height"),10),ha="horizontal"==w?Q:U,R="horizontal"==w?"left":"top",v=f.visibleItems,D,M=null,n,h,l,xa=T?!1:f.openOnRollover,na=f.keepSelection,J,s=g.find(".componentControls"),T=s.find(".controls_previous"),Q=s.find(".controls_toggle"),z=s.find(".controls_pause"), r=s.find(".controls_pause2"),y=s.find(".controls_play"),L=s.find(".controls_play2"),U=s.find(".controls_next");Q.children("img");var V=r.height();T.css("cursor","pointer");Q.css("cursor","pointer");U.css("cursor","pointer");T.bind("click touchstart MozTouchDown",W);Q.bind("click touchstart MozTouchDown",W);U.bind("click touchstart MozTouchDown",W);y.css("display","none");z.css("display","none");e?z.css("display","block"):y.css("display","block");var G=!1;g.mouseenter(function(a){G=!0;e&&H()}).mouseleave(function(){G= !1;e&&!$&&I()});va&&ra.keyup(function(a){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.keyCode;37==a?X():39==a?"forward"==E?N():Z():32==a&&Y();return!1});(function(){var a,l=0;a=u.find("div[class=slide]");var c,d;g.find(".fontMeasure");var m;D=q=a.length;v>D&&(v=D);a.each(function(){t.push(k(this))});for(l;l<q;l++){a=k(t[l]);a.attr("data-id",l);if(ua)"horizontal"==w?(c=parseInt(a.css("width"),10),a.data("itemSize",c)):(d=parseInt(a.css("height"),10), a.data("itemSize",d));else if("horizontal"==w){if(void 0==a.attr("data-width")||F(a.attr("data-width"))){alert("Slides are missing 'data-width' attributtes!");return}c=parseInt(a.attr("data-width"),10);a.css("width",c+"px");a.data("itemSize",c)}else{if(void 0==a.attr("data-height")||F(a.attr("data-height"))){alert("Slides are missing 'data-height' attributtes!");return}d=parseInt(a.attr("data-height"),10);a.css("height",d+"px");a.data("itemSize",d)}a.find("a[class=pp_content]").bind("click",function(){$= !0;e&&H();detailActivated();return!1});c=parseInt(a.css("width"),10);d=parseInt(a.css("height"),10);if(void 0!=a.attr("data-link")&&!F(a.attr("data-link"))){m=k("<div />");m.css({position:"absolute",left:"0px",top:"0px",width:c+"px",height:d+"px",background:"#00ff00",opacity:0,cursor:"pointer"});var n=a.attr("data-link"),r;r=void 0==a.attr("data-target")||F(a.attr("data-target"))?"_blank":a.attr("data-target");n=k("<a href="+n+" target="+r+" ></a>");n.append(m);a.append(n)}xa?(a.bind("mouseenter", fa),a.bind("mouseleave",ma)):void 0!=a.attr("data-preventDefaultOnOpen")&&"true"==a.attr("data-preventDefaultOnOpen")?(m=k("<div />"),m.css({position:"absolute",left:"0px",top:"0px",width:c+"px",height:d+"px",background:"#ff0000",opacity:0,cursor:"pointer"}),a.append(m),a.data("preventDefaultOnOpen",m),m.bind("click touchstart MozTouchDown",ea),m.attr("data-id",l)):a.bind("click touchstart MozTouchDown",ea);0<a.find("div[class=slide_content]").length&&(c=a.find("div[class=slide_content]"),a.data("slideContent", c))}P.animate({opacity:1},{duration:1E3,easing:"easeOutSine"});ga();b=f.activeItem;b>q-1&&(b=q-1);ta&&(s.css("opacity",0),s.css("display","block"),s.stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"}));h=P.jScrollPane().data().jsp;ca();P.bind("jsp-initialised",function(a,b){});"horizontal"==wa?(u.bind("mousewheel",la),P.jScrollPane({enableKeyboardNavigation:!1,maintainPosition:!0,horizontalDragMinWidth:60,horizontalDragMaxWidth:70})):P.jScrollPane({enableKeyboardNavigation:!1,maintainPosition:!0, verticalDragMinHeight:60,verticalDragMaxHeight:70});sa.css("display","none");p=!0;accordionGalleryReady();e?(-1==b&&(b=0),x(b)):-1!=b&&x(b)})();this.checkSlideshow2=function(){$=!1;e&&(y.css("display","none"),z.css("display","block"),C||I());detailClosed()};this.toggleSlideshow=function(a){p&&(void 0==a?Y():a?(e=!0,y.css("display","none"),z.css("display","block"),C||I()):(H(),e=!1))};this.toggleDirection=function(a){p&&(E=a&&F(a)?a:"forward"==E?"backward":"forward")};this.setSlideshowDelay=function(a){p&& (O=a)};this.nextMedia=function(){p&&("forward"==E?N():Z())};this.previousMedia=function(){p&&X()};this.openMedia=function(a){p&&(0>a?a=0:a>q-1&&(a=q-1),A(a),b=a,x(b))};return this}})(jQuery);